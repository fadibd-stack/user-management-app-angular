<!-- Overlay -->
@if (isOpen) {
  <div class="overlay" (click)="onClose()"></div>
}

<!-- Sidebar -->
<div class="sidebar" [class.open]="isOpen">
  <div class="sidebar-header">
    <input type="text" class="search-input" placeholder="Search..." />
  </div>

  <div class="sidebar-content">
    <!-- DEBUG: Menu sections length = {{menuSections.length}} -->

    @if (menuSections.length === 0) {
      <div class="no-access-message">
        <p>No menu access configured</p>
        <p style="font-size: 0.875rem; color: #666; margin-top: 0.5rem;">
          Please contact your administrator to request access.
        </p>
      </div>
    }

    @for (section of menuSections; track section.section) {
      <div class="section">
        <div class="section-title" (click)="toggleSection(section.section)">
          <span class="expand-icon">{{ isSectionExpanded(section.section) ? '▼' : '▶' }}</span>
          <span>{{ section.title }}</span>
        </div>

        @if (isSectionExpanded(section.section)) {
          <div class="section-items">
            @for (item of section.items; track item.id) {
              <!-- Regular menu item -->
              <a
                [routerLink]="item.path"
                (click)="onLinkClick()"
                class="menu-item"
                [class.active]="isActiveRoute(item.path)"
              >
                {{ item.label }}
              </a>
            }
          </div>
        }
      </div>
    }
  </div>
</div>
